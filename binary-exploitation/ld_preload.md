---
description: 10/30/2023
cover: https://media.tenor.com/KZcXqqlfzoMAAAAC/mr-robot-elliot-alderson.gif
coverY: 59
---

# ðŸ”ƒ LD\_PRELOAD

> _**"As if this stuff can't get any cooler..."**_

In Linux, `LD_PRELOAD` is an <mark style="color:yellow;">environment variable</mark> that allows us to be able to _manipulate which library is used at runtime for a binary_.&#x20;

* In other words, force a binary to use a specific library

This <mark style="color:yellow;">allows us to be able to change program behavior, how certain functions work, and logic</mark>.

## Preeny, pre-existing pwn libraries for `LD_PRELOAD`

{% embed url="https://github.com/zardus/preeny" %}

## How-to: `LD_PRELOAD`

1. **Write your own library:**

`library.h:`

```c
#include <stdio.h>

foo bar(arg1, arg2)

{
    return 0;
}
```

2. **Compile and set `LD_LIBRARY_PATH` variable to current directory:**

```
cc -o <library.hso> -shared library.c -ldl

LD_LIBRARY_PATH=./$LD_LIBRARY_PATH
```

a `library.so` file will be created, <mark style="color:yellow;">this is our shared library that we want our binary to use</mark>.

3. **Set the `LD_PRELOAD` environment variable to the compiled shared library and execute the program with our `LD_PRELOAD`:**

```
LD_PRELOAD=library.so ./<target_binary>
```

This will force our target binary to use our newly created shared library.

Ultimately, changing the binary's behavior.
